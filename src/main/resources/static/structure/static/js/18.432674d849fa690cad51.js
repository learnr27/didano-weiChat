webpackJsonp([18],{472:function(e,t,n){n(702);var i=n(35)(n(638),n(730),null,null);e.exports=i.exports},638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(186),o=n.n(i),a=n(184),A=n.n(a);t.default={data:function(){return{titleContent:"与园长进行沟通",mails:[],firstMail:[],userId:"",userInfo:[],sendContent:"",mailId:"",disabledSend:!1,defaultAvatar:"http://cdn-didano.oss-cn-shenzhen.aliyuncs.com/xiaonuo/wx/img/logo_2.jpg",state:{isShow:!0,message:"加载中",state:"loading"}}},created:function(){this.userInfo=JSON.parse(localStorage.getItem("CURRENT_USER")),this.userInfo.roleType===PARENT?this.userId=this.userInfo.parentId:(this.userId=this.userInfo.staffId,this.titleContent=this.$route.query.dialogueTitle),this.$route.query.mailId||0!=this.mailId?(this.mailId=this.$route.query.mailId,this._initMailContent()):0==this.mailId&&this.getMailIdByUserId()},methods:{_initMailContent:function(){var e=this;this.$http.post(WX_URL+"base/mailbox/post/findReply_ByNoticeId/"+this.mailId).then(function(t){t=t.data,t.success&&(e.state.isShow=!1,e.mails=t.data,e.firstMail=e.mails.mai)},function(t){e.state.state="error",e.state.message="网络错误"})},sendMessage:function(){var e=this;this.sendContent&&(this.disabledSend=!0),this.disabledSend&&this.$http.post(WX_URL+"base/mailbox/post/write_mail",{content:this.sendContent,mailId:this.mailId,studentId:this.userInfo.studentId,userId:this.userId,userType:this.userInfo.roleType}).then(function(t){t=t.data,t.success&&(e.mailId=t.data,e.sendContent="",e._initMailContent())})},deleteMail:function(e){var t=this;this.$http.post(WX_URL+"base/mailbox/post/deleteMailByBoss/"+e.id).then(function(e){e=e.data,e.success&&t._initMailContent()})},getMailIdByUserId:function(){var e=this;this.$http.post(WX_URL+"base/mailbox/post/parentGetMailId/"+this.userId).then(function(t){t=t.data,t.success&&(e.mailId=t.data,e.mailId?e._initMailContent():e.state.isShow=!1)})},fetchData:function(){this._initMailContent()}},components:{"v-header":o.a,LingLoading:A.a}}},678:function(e,t,n){t=e.exports=n(470)(),t.push([e.i,'.mailbox{height:100%;background-color:#f5f5f5}.mailbox .mailboxList{padding:1.5rem;margin-bottom:4rem}.mailbox .mailboxList .an-move-left{left:0;-webkit-animation:moveLeft .7s ease;animation:moveLeft .7s ease}.mailbox .mailboxList .an-move-right{left:0;-webkit-animation:moveRight .7s ease;animation:moveRight .7s ease}.mailbox .mailboxList .time{text-align:center}.mailbox .mailboxList .time span{display:inline-block;padding:0 1.5rem;height:2rem;line-height:2rem;font-size:1.2rem;color:#fff;border-radius:1rem;background-color:#dadada}.mailbox .mailboxList .main{position:relative;margin:2.5rem 0}.mailbox .mailboxList .main .usetInfo{float:left;margin:0 1rem 0 0;width:4rem;text-align:center;font-size:0}.mailbox .mailboxList .main .usetInfo .avatar{width:4rem;height:4rem;border-radius:.3rem;background:#fff}.mailbox .mailboxList .main .usetInfo .relation{display:block;font-size:1rem}.mailbox .mailboxList .main .content{display:inline-block;position:relative;max-width:calc(100% - 11.5rem);min-height:2.1rem;line-height:2.5rem;font-size:1.5rem;padding:.8rem 1.2rem;text-align:left;word-break:break-all;background-color:#fff;color:#000;border-radius:4px;box-shadow:0 1px 7px -5px #000}.mailbox .mailboxList .main .content:before{content:" ";position:absolute;top:.9rem;right:100%;border:.6rem solid transparent;border-right-color:#fff}.mailbox .mailboxList .main .content .image{max-width:21rem}.mailbox .mailboxList .main .content .deleteBtn{position:absolute;right:-3.5rem;top:.5rem;display:inline-block;width:3rem;height:3rem;line-height:3rem;text-align:center;border-radius:.5rem;color:#fff;background:#ffce87}.mailbox .mailboxList .self{text-align:right}.mailbox .mailboxList .self .usetInfo{float:right;margin:0 0 0 1rem}.mailbox .mailboxList .self .content{background-color:#fff}.mailbox .mailboxList .self .content:before{right:inherit;left:100%;border-right-color:transparent;border-left-color:#fff}.mailbox .mailboxList .self .content .deleteBtn{position:absolute;left:-3.5rem;top:.5rem}.mailbox .inputContent{display:-webkit-box;display:-webkit-flex;display:flex;position:fixed;bottom:0;box-sizing:border-box;padding:1rem 1.5rem;width:100%;border-top:1px solid #dedede;background:#fff;font-size:1.5rem}.mailbox .inputContent .inputBox{-webkit-box-flex:1;-webkit-flex:1;flex:1;box-sizing:border-box;padding-right:1.5rem;height:3rem;line-height:3rem}.mailbox .inputContent .inputBox div{border-bottom:1px solid #888}.mailbox .inputContent .inputBox input{width:95%;height:3rem;padding-left:.5rem}.mailbox .inputContent .sendBtn{background:#ffce87}.mailbox .inputContent .sendBtn,.mailbox .inputContent .unsendBtn{-webkit-box-flex:0;-webkit-flex:0 0 4.5rem;flex:0 0 4.5rem;height:3rem;line-height:3rem;text-align:center;border-radius:.5rem;color:#fff}.mailbox .inputContent .unsendBtn{background:#dedede}.mailbox .cover{position:fixed;top:0;width:100%;height:100%;z-index:-1;background-color:#f5f5f5}',"",{version:3,sources:["D:/Vue/xiaonuo-vue/src/components/mailbox/mailContent.vue"],names:[],mappings:"AACA,SACE,YAAa,AACb,wBAA0B,CAC3B,AACD,sBACE,eAAuB,AACvB,kBAAoB,CACrB,AACD,oCACE,OAAQ,AACR,oCAAsC,AAC9B,2BAA8B,CACvC,AACD,qCACE,OAAQ,AACR,qCAAuC,AAC/B,4BAA+B,CACxC,AACD,4BACE,iBAAmB,CACpB,AACD,iCACE,qBAAsB,AACtB,iBAAkB,AAClB,YAAa,AACb,iBAAkB,AAClB,iBAAkB,AAClB,WAAY,AACZ,mBAAoB,AACpB,wBAA0B,CAC3B,AACD,4BACE,kBAAmB,AACnB,eAAiB,CAClB,AACD,sCACE,WAAY,AACZ,kBAAmB,AACnB,WAAY,AACZ,kBAAmB,AACnB,WAAa,CACd,AACD,8CACE,WAAY,AACZ,YAAa,AACb,oBAAsB,AACtB,eAAiB,CAClB,AACD,gDACE,cAAe,AACf,cAAgB,CACjB,AACD,qCACE,qBAAsB,AACtB,kBAAmB,AACnB,+BAAgC,AAChC,kBAAmB,AACnB,mBAAoB,AACpB,iBAAkB,AAClB,qBAAqC,AACrC,gBAAiB,AACjB,qBAAsB,AACtB,sBAAuB,AACvB,WAAY,AACZ,kBAAmB,AACnB,8BAAkC,CACnC,AACD,4CACE,YAAa,AACb,kBAAmB,AACnB,UAAY,AACZ,WAAY,AACZ,+BAAiC,AACjC,uBAAyB,CAC1B,AACD,4CACE,eAAiB,CAClB,AACD,gDACE,kBAAmB,AACnB,cAAe,AACf,UAAY,AACZ,qBAAsB,AACtB,WAAY,AACZ,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AACnB,oBAAsB,AACtB,WAAY,AACZ,kBAAoB,CACrB,AACD,4BACE,gBAAkB,CACnB,AACD,sCACE,YAAa,AACb,iBAAmB,CACpB,AACD,qCACE,qBAAuB,CACxB,AACD,4CACE,cAAe,AACf,UAAW,AACX,+BAAgC,AAChC,sBAAwB,CACzB,AACD,gDACE,kBAAmB,AACnB,aAAc,AACd,SAAY,CACb,AACD,uBACE,oBAAqB,AACrB,qBAAsB,AACtB,aAAc,AACd,eAAgB,AAChB,SAAU,AACV,sBAAuB,AACvB,oBAAiC,AACjC,WAAY,AACZ,6BAA8B,AAC9B,gBAAiB,AACjB,gBAAkB,CACnB,AACD,iCACE,mBAAoB,AACpB,eAAgB,AACR,OAAQ,AAChB,sBAAuB,AACvB,qBAAsB,AACtB,YAAa,AACb,gBAAkB,CACnB,AACD,qCACE,4BAA8B,CAC/B,AACD,uCACE,UAAW,AACX,YAAa,AACb,kBAAqB,CACtB,AACD,gCAQE,kBAAoB,CAErB,AACD,kEAVE,mBAAoB,AACpB,wBAAyB,AACjB,gBAAiB,AACzB,YAAa,AACb,iBAAkB,AAClB,kBAAmB,AACnB,oBAAsB,AAEtB,UAAY,CAYb,AAVD,kCAQE,kBAAoB,CAErB,AACD,gBACE,eAAgB,AAChB,MAAO,AACP,WAAY,AACZ,YAAa,AACb,WAAY,AACZ,wBAA0B,CAC3B",file:"mailContent.vue",sourcesContent:['\n.mailbox {\n  height: 100%;\n  background-color: #f5f5f5;\n}\n.mailbox .mailboxList {\n  padding: 1.5rem 1.5rem;\n  margin-bottom: 4rem;\n}\n.mailbox .mailboxList .an-move-left {\n  left: 0;\n  -webkit-animation: moveLeft 0.7s ease;\n          animation: moveLeft 0.7s ease;\n}\n.mailbox .mailboxList .an-move-right {\n  left: 0;\n  -webkit-animation: moveRight 0.7s ease;\n          animation: moveRight 0.7s ease;\n}\n.mailbox .mailboxList .time {\n  text-align: center;\n}\n.mailbox .mailboxList .time span {\n  display: inline-block;\n  padding: 0 1.5rem;\n  height: 2rem;\n  line-height: 2rem;\n  font-size: 1.2rem;\n  color: #fff;\n  border-radius: 1rem;\n  background-color: #dadada;\n}\n.mailbox .mailboxList .main {\n  position: relative;\n  margin: 2.5rem 0;\n}\n.mailbox .mailboxList .main .usetInfo {\n  float: left;\n  margin: 0 1rem 0 0;\n  width: 4rem;\n  text-align: center;\n  font-size: 0;\n}\n.mailbox .mailboxList .main .usetInfo .avatar {\n  width: 4rem;\n  height: 4rem;\n  border-radius: 0.3rem;\n  background: #fff;\n}\n.mailbox .mailboxList .main .usetInfo .relation {\n  display: block;\n  font-size: 1rem;\n}\n.mailbox .mailboxList .main .content {\n  display: inline-block;\n  position: relative;\n  max-width: calc(100% - 11.5rem);\n  min-height: 2.1rem;\n  line-height: 2.5rem;\n  font-size: 1.5rem;\n  padding: 0.8rem 1.2rem 0.8rem 1.2rem;\n  text-align: left;\n  word-break: break-all;\n  background-color: #fff;\n  color: #000;\n  border-radius: 4px;\n  box-shadow: 0px 1px 7px -5px #000;\n}\n.mailbox .mailboxList .main .content:before {\n  content: " ";\n  position: absolute;\n  top: 0.9rem;\n  right: 100%;\n  border: 0.6rem solid transparent;\n  border-right-color: #fff;\n}\n.mailbox .mailboxList .main .content .image {\n  max-width: 21rem;\n}\n.mailbox .mailboxList .main .content .deleteBtn {\n  position: absolute;\n  right: -3.5rem;\n  top: 0.5rem;\n  display: inline-block;\n  width: 3rem;\n  height: 3rem;\n  line-height: 3rem;\n  text-align: center;\n  border-radius: 0.5rem;\n  color: #fff;\n  background: #ffce87;\n}\n.mailbox .mailboxList .self {\n  text-align: right;\n}\n.mailbox .mailboxList .self .usetInfo {\n  float: right;\n  margin: 0 0 0 1rem;\n}\n.mailbox .mailboxList .self .content {\n  background-color: #fff;\n}\n.mailbox .mailboxList .self .content:before {\n  right: inherit;\n  left: 100%;\n  border-right-color: transparent;\n  border-left-color: #fff;\n}\n.mailbox .mailboxList .self .content .deleteBtn {\n  position: absolute;\n  left: -3.5rem;\n  top: 0.5rem;\n}\n.mailbox .inputContent {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  position: fixed;\n  bottom: 0;\n  box-sizing: border-box;\n  padding: 1rem 1.5rem 1rem 1.5rem;\n  width: 100%;\n  border-top: 1px solid #dedede;\n  background: #fff;\n  font-size: 1.5rem;\n}\n.mailbox .inputContent .inputBox {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  box-sizing: border-box;\n  padding-right: 1.5rem;\n  height: 3rem;\n  line-height: 3rem;\n}\n.mailbox .inputContent .inputBox div {\n  border-bottom: 1px solid #888;\n}\n.mailbox .inputContent .inputBox input {\n  width: 95%;\n  height: 3rem;\n  padding-left: 0.5rem;\n}\n.mailbox .inputContent .sendBtn {\n  -webkit-box-flex: 0;\n  -webkit-flex: 0 0 4.5rem;\n          flex: 0 0 4.5rem;\n  height: 3rem;\n  line-height: 3rem;\n  text-align: center;\n  border-radius: 0.5rem;\n  background: #ffce87;\n  color: #fff;\n}\n.mailbox .inputContent .unsendBtn {\n  -webkit-box-flex: 0;\n  -webkit-flex: 0 0 4.5rem;\n          flex: 0 0 4.5rem;\n  height: 3rem;\n  line-height: 3rem;\n  text-align: center;\n  border-radius: 0.5rem;\n  background: #dedede;\n  color: #fff;\n}\n.mailbox .cover {\n  position: fixed;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n  background-color: #f5f5f5;\n}'],sourceRoot:""}])},702:function(e,t,n){var i=n(678);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(471)("28109dda",i,!0)},730:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mailbox"},[n("v-header",{attrs:{titleContent:e.titleContent}}),e._v(" "),n("div",{staticClass:"mailboxList"},[n("ul",[n("li",{directives:[{name:"show",rawName:"v-show",value:e.firstMail.id,expression:"firstMail.id"}],class:"message "+(e.firstMail.senderId==e.userId?"an-move-right":"an-move-left")},[n("p",{staticClass:"time"},[n("span",[e._v(e._s(e.firstMail.date))])]),e._v(" "),n("div",{class:"main"+(e.firstMail.senderId==e.userId?" self":"")},[n("span",{staticClass:"usetInfo"},[""!=e.firstMail.head?n("img",{staticClass:"avatar",attrs:{src:e.firstMail.head}}):n("img",{staticClass:"avatar",attrs:{src:"http://cdn-didano.oss-cn-shenzhen.aliyuncs.com/xiaonuo/wx/img/logo_2.jpg"}}),e._v(" "),n("span",{staticClass:"relation"},[e._v(e._s(e.firstMail.senderName))])]),e._v(" "),n("div",{staticClass:"content"},[e._v(e._s(e.firstMail.content))])]),e._v(" "),n("div",{staticStyle:{clear:"both"}})]),e._v(" "),e._l(e.mails.replys,function(t,i){return n("li",{class:"message "+(t.senderId==e.userId?"an-move-right":"an-move-left")},[n("p",{staticClass:"time"},[n("span",[e._v(e._s(t.date))])]),e._v(" "),n("div",{class:"main"+(t.senderId==e.userId?" self":"")},[n("span",{staticClass:"usetInfo"},[n("img",{staticClass:"avatar",attrs:{src:"http://cdn-didano.oss-cn-shenzhen.aliyuncs.com/xiaonuo/wx/img/logo_2.jpg"}}),e._v(" "),n("span",{staticClass:"relation"},[e._v(e._s(t.senderName))])]),e._v(" "),n("div",[n("div",{staticClass:"content"},[e._v("\n                "+e._s(t.content)+"\n                "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.senderId==e.userId,expression:"mail.senderId==userId"}],staticClass:"deleteBtn",on:{click:function(n){e.deleteMail(t)}}})])])]),e._v(" "),n("div",{staticStyle:{clear:"both"}})])})],2)]),e._v(" "),n("div",{staticClass:"inputContent"},[n("div",{staticClass:"inputBox"},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.sendContent,expression:"sendContent"}],attrs:{type:"text",placeholder:"请输入发送内容"},domProps:{value:e.sendContent},on:{input:function(t){t.target.composing||(e.sendContent=t.target.value)}}})])]),e._v(" "),n("span",{class:e.sendContent?"sendBtn":"unsendBtn",on:{click:e.sendMessage}},[e._v("发送")])]),e._v(" "),n("div",{staticClass:"cover"}),e._v(" "),n("ling-loading",{attrs:{click:e.fetchData,state:e.state}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=18.432674d849fa690cad51.js.map